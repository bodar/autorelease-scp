<?xml version="1.0" encoding="UTF-8"?>
<project default="release">

    <property name="artifacts" value="artifacts"/>
    <property file="${artifacts}/release.properties"/>

	<taskdef resource="net/sf/antcontrib/antlib.xml" classpath="lib/ant-contrib.jar"/>

    <target name="release">
		<sshexec host="${server.name}" username="${release.username}" password="${release.password}" command="mkdir -p ${server.path}/${release.path}" trust="true"/>
        <for list="${release.files}" param="file">
            <sequential>
                <scp file="${artifacts}/@{file}" todir="${release.username}:${release.password}@${server.name}:${server.path}/${release.path}" trust="true"/>
                <checksum file="${artifacts}/@{file}" algorithm="md5"/>
                <scp file="${artifacts}/@{file}.md5" todir="${release.username}:${release.password}@${server.name}:${server.path}/${release.path}" trust="true"/>
                <checksum file="${artifacts}/@{file}" algorithm="sha1"/>
                <scp file="${artifacts}/@{file}" todir="${release.username}:${release.password}@${server.name}:${server.path}/${release.path}" trust="true"/>
            </sequential>
        </for>
    </target>
</project>
